name: Sanity check
on: [pull_request]

jobs:
  commits_check_job:
    runs-on: ubuntu-latest
    name: Commits Check
    steps:
      - name: Get abbreviated PR Commits
        id: "get-pr-commits"
        uses: thislooksfun/get-pr-commits@4dddd32f36d0baafbaecc6c1317e4f8942c11570
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          # This only keeps the following structure for each commit:
          # { "sha": "<sha>", "commit": {"message": "<commit message>" } }
          # All other information is discarded.
          keep_keypaths: '[["sha"], ["commit", "message"]]'
      - run: >
          echo 'Commits: "${{ steps.get-pr-commits.commits }}"'
