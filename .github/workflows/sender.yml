name: Release Builder

on: push

jobs:
  tag:
    runs-on: ubuntu-latest
    steps:
      - name: Tag New Version
        uses: actions/github-script@0.3.0
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const {sha, payload: {repository: {name: repo, owner: {name: owner}} }} = context;
            const pkg = await github.repos.getContents({repo, owner, path: 'package.json', ref: sha});
            console.log(pkg);
            # const version
            # const tag = `v${version}`
            # github.git.createRef({owner, repo, sha, ref: `refs/tags/${tag}`})
            # await github.repos.
      #
      # - name: Repository Dispatch
      #   uses: peter-evans/repository-dispatch@v1
      #   with:
      #     token: ${{ secrets.REPO_ACCESS_TOKEN }}
      #     repository: username/my-repo
      #     event-type: my-event
      #     client-payload: '{"ref": "${{ github.ref }}", "sha": "${{ github.sha }}", "commit": $COMMIT}'
